<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cortar PDF - PDF-Export & Import</title>
    <link rel="icon" type="image/x-icon" href="/static/fav.ico">
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        /* Estilos especificos para cortar PDF */
        .split-container {
            display: grid;
            grid-template-columns: 1fr 400px;
            gap: 25px;
            margin-top: 20px;
        }

        .pdf-preview {
            display: flex;
            gap: 20px;
            justify-content: center;
            padding: 20px;
            background: var(--color-background);
            border-radius: var(--radius-md);
        }

        .preview-card {
            text-align: center;
        }

        .preview-card img {
            max-width: 180px;
            max-height: 250px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            box-shadow: var(--shadow-sm);
        }

        .preview-label {
            margin-top: 8px;
            font-size: 0.9rem;
            color: var(--color-text-light);
        }

        /* Panel de cortes */
        .cuts-panel {
            background: var(--color-surface);
            border-radius: var(--radius-lg);
            padding: 20px;
            box-shadow: var(--shadow-sm);
        }

        .cuts-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid var(--color-border);
        }

        .cuts-list {
            display: flex;
            flex-direction: column;
            gap: 15px;
            max-height: 400px;
            overflow-y: auto;
        }

        .cut-item {
            background: var(--color-background);
            border-radius: var(--radius-md);
            padding: 15px;
            border: 2px solid var(--color-border);
        }

        .cut-item.active {
            border-color: var(--color-primary);
        }

        .cut-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
        }

        .cut-title {
            font-weight: 600;
            color: var(--color-text);
        }

        .cut-pages {
            font-size: 0.85rem;
            color: var(--color-text-light);
        }

        .cut-range {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .cut-range input {
            width: 70px;
            padding: 8px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            text-align: center;
            font-size: 1rem;
        }

        .cut-range input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .cut-range span {
            color: var(--color-text-light);
        }

        .cut-thumbnails {
            display: flex;
            gap: 10px;
            margin-top: 12px;
        }

        .cut-thumb {
            flex: 1;
            text-align: center;
        }

        .cut-thumb img {
            max-width: 80px;
            max-height: 110px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
        }

        .cut-thumb-label {
            font-size: 0.75rem;
            color: var(--color-text-light);
            margin-top: 4px;
        }

        .btn-remove-cut {
            background: none;
            border: none;
            color: var(--color-danger);
            cursor: pointer;
            font-size: 1.2rem;
            padding: 5px;
        }

        .btn-remove-cut:hover {
            opacity: 0.7;
        }

        /* Opciones de corte automatico */
        .auto-split-section {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid var(--color-border);
        }

        .auto-split-row {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .auto-split-row input {
            width: 60px;
            padding: 8px;
            border: 1px solid var(--color-border);
            border-radius: var(--radius-sm);
            text-align: center;
        }

        /* Info del archivo */
        .file-info-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            background: var(--color-background);
            padding: 12px 20px;
            border-radius: var(--radius-md);
            margin-bottom: 20px;
        }

        .file-info-name {
            font-weight: 500;
        }

        .file-info-pages {
            color: var(--color-primary);
            font-weight: 600;
        }

        /* Responsive */
        @media (max-width: 900px) {
            .split-container {
                grid-template-columns: 1fr;
            }

            .pdf-preview {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <h1 class="logo" style="font-size: 2rem;"><a href="/" style="color: inherit; text-decoration: none;">PDF-Export &amp; Import</a></h1>
            <p class="subtitle">Cortar PDF en partes</p>
        </header>

        <main class="main-content">
            <!-- Panel principal -->
            <section class="main-panel">
                <!-- Zona de carga -->
                <div id="zona-carga" class="upload-zone">
                    <div class="upload-icon">PDF</div>
                    <p class="upload-text">Arrastra un archivo PDF aqui</p>
                    <p class="upload-hint">o haz clic para seleccionar (maximo 1GB)</p>
                </div>

                <!-- Progreso de carga -->
                <div id="progreso-carga" class="progress-large" style="display: none;">
                    <div class="progress-bar-large">
                        <div class="progress-fill" id="barra-progreso"></div>
                    </div>
                    <div class="progress-info">
                        <span id="texto-progreso">Subiendo...</span>
                        <span id="porcentaje-progreso">0%</span>
                    </div>
                </div>

                <!-- Info del archivo cargado -->
                <div id="info-archivo" class="file-info-bar" style="display: none;">
                    <span class="file-info-name" id="nombre-archivo">documento.pdf</span>
                    <span class="file-info-pages"><span id="num-paginas">0</span> paginas</span>
                </div>

                <!-- Vista previa del PDF -->
                <div id="vista-previa" class="pdf-preview" style="display: none;">
                    <div class="preview-card">
                        <img id="thumb-primera" src="" alt="Primera pagina">
                        <p class="preview-label">Primera pagina</p>
                    </div>
                    <div class="preview-card">
                        <img id="thumb-ultima" src="" alt="Ultima pagina">
                        <p class="preview-label">Ultima pagina</p>
                    </div>
                </div>

                <!-- Mensajes de estado -->
                <div id="mensaje-estado" class="status-message" style="display: none;"></div>
            </section>

            <!-- Panel de cortes (lateral) -->
            <aside id="panel-cortes" class="cuts-panel" style="display: none;">
                <div class="cuts-header">
                    <h3>Cortes</h3>
                    <button id="btn-agregar-corte" class="btn btn-primary btn-small">+ Agregar corte</button>
                </div>

                <!-- Lista de cortes -->
                <div id="lista-cortes" class="cuts-list">
                    <!-- Los cortes se agregan dinamicamente -->
                </div>

                <!-- Corte automatico -->
                <div class="auto-split-section">
                    <h4 style="margin-bottom: 12px;">Corte automatico</h4>
                    <div class="auto-split-row">
                        <span>Dividir en</span>
                        <input type="number" id="num-partes-auto" min="2" max="20" value="2">
                        <span>partes iguales</span>
                        <button id="btn-auto-split" class="btn btn-small" style="background: var(--color-secondary); color: white;">
                            Calcular
                        </button>
                    </div>
                </div>

                <!-- Botones de accion -->
                <div class="action-buttons" style="margin-top: 25px;">
                    <button id="btn-ejecutar" class="btn btn-primary" disabled>
                        Cortar y Descargar
                    </button>
                </div>

                <!-- Progreso de procesamiento -->
                <div id="progreso-proceso" class="progress-large" style="display: none; margin-top: 15px;">
                    <div class="progress-bar-large">
                        <div class="progress-fill" id="barra-proceso"></div>
                    </div>
                    <div class="progress-info">
                        <span id="texto-proceso">Procesando...</span>
                        <span id="porcentaje-proceso">0%</span>
                    </div>
                </div>
            </aside>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p><strong>PDF-Export & Import</strong> - Herramientas de conversion PDF para la Soberanía Digital Empresarial</p>
            <p class="footer-info"><a href="/">Volver al inicio</a></p>
            <p class="footer-info" id="app-version"></p>

            <div class="footer-legal" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--color-border); font-size: 0.85rem; color: var(--color-text-light); text-align: left; max-width: 900px; margin-left: auto; margin-right: auto;">
                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--color-text);">Aviso de uso y alcance</h4>
                <p style="margin-bottom: 10px;">Esta aplicación y su API están destinadas a uso privado.
                No se implementan claves de acceso a nivel de aplicación con el objetivo de mantener transparencia total sobre su funcionamiento y fomentar la conciencia respecto del tratamiento de documentos y datos compartidos.</p>

                <p style="margin-bottom: 10px;">Se recomienda su despliegue dentro de una red local (LAN), preferentemente en una zona desmilitarizada (DMZ).
                En caso de habilitar acceso externo, se sugiere hacerlo mediante un proxy inverso con mecanismos de autenticación, quedando dicha configuración bajo el criterio y responsabilidad del usuario.</p>

                <p style="margin-bottom: 10px;">Este proyecto se presenta como un prototipo funcional, orientado a mejorar la eficiencia operativa y promover la soberanía digital sobre los recursos informáticos utilizados para el procesamiento de documentos.</p>

                <p>El código y la aplicación se distribuyen bajo una licencia de uso público y amplio, permitiendo su utilización, modificación y adaptación conforme a dicho marco.</p>
            </div>
        </footer>
    </div>

    <script src="/config.js"></script>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/pdf-split.js"></script>
</body>
</html>
