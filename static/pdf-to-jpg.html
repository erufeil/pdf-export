<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PDF a JPG - PDF-Export & Import</title>
    <link rel="icon" type="image/x-icon" href="/static/fav.ico">
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        /* Estilos especificos para PDF a JPG */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 350px;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 900px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        .options-panel {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid var(--color-border);
        }

        .option-section {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--color-border);
        }

        .option-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .option-section h4 {
            margin-bottom: 12px;
            font-weight: 500;
        }

        /* Selector de DPI */
        .dpi-selector {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
        }

        .dpi-option {
            flex: 1;
            min-width: 70px;
        }

        .dpi-option input[type="radio"] {
            display: none;
        }

        .dpi-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 12px 8px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-weight: 500;
        }

        .dpi-option label span {
            font-size: 0.75rem;
            color: var(--color-text-light);
            font-weight: normal;
        }

        .dpi-option input:checked + label {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
            color: var(--color-primary);
        }

        /* Slider de calidad JPG */
        .quality-slider-container {
            margin-top: 10px;
        }

        .quality-slider {
            width: 100%;
            height: 8px;
            border-radius: 4px;
            background: var(--color-border);
            outline: none;
            -webkit-appearance: none;
            appearance: none;
        }

        .quality-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .quality-slider::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--color-primary);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .quality-labels {
            display: flex;
            justify-content: space-between;
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--color-text-light);
        }

        .quality-value {
            text-align: center;
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--color-primary);
            margin-bottom: 10px;
        }

        /* Selector de paginas */
        .pages-selector {
            display: flex;
            flex-direction: column;
            gap: 10px;
        }

        .page-option {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .page-option input[type="radio"] {
            width: 18px;
            height: 18px;
            accent-color: var(--color-primary);
        }

        .page-range-inputs {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-left: 28px;
            margin-top: 5px;
        }

        .page-range-inputs input {
            width: 70px;
            padding: 8px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
            text-align: center;
        }

        .page-specific-input {
            margin-left: 28px;
            margin-top: 5px;
        }

        .page-specific-input input {
            width: 100%;
            padding: 8px 12px;
            border: 1px solid var(--color-border);
            border-radius: 6px;
        }

        .page-specific-input small {
            display: block;
            margin-top: 5px;
            color: var(--color-text-light);
            font-size: 0.8rem;
        }

        /* Estimacion de tamano */
        .size-estimate {
            background: var(--color-background);
            border-radius: 8px;
            padding: 15px;
            margin-top: 15px;
        }

        .size-estimate-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
        }

        .size-estimate-row:last-child {
            margin-bottom: 0;
        }

        .size-estimate-label {
            color: var(--color-text-light);
        }

        .size-estimate-value {
            font-weight: 500;
        }

        .size-compare {
            font-size: 0.85rem;
            color: var(--color-success);
        }

        /* Preview */
        .preview-section {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--color-border);
            margin-top: 20px;
        }

        .preview-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 200px;
            background: var(--color-background);
            border-radius: 8px;
        }

        .preview-thumbnail {
            max-width: 100%;
            max-height: 300px;
            border-radius: 4px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }

        .preview-placeholder {
            color: var(--color-text-light);
            text-align: center;
        }

        /* Info del archivo */
        .file-info {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            background: var(--color-surface);
            border-radius: 8px;
            margin-bottom: 20px;
            border: 1px solid var(--color-border);
        }

        .file-info-icon {
            width: 48px;
            height: 48px;
            background: var(--color-primary);
            border-radius: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 1.5rem;
        }

        .file-info-details {
            flex: 1;
        }

        .file-info-name {
            font-weight: 500;
            margin-bottom: 4px;
        }

        .file-info-meta {
            font-size: 0.85rem;
            color: var(--color-text-light);
        }

        /* Barra de progreso de proceso */
        .process-progress {
            margin-top: 20px;
        }

        .process-progress .progress-bar-container {
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .process-progress .progress-bar {
            height: 100%;
            background: var(--color-primary);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .process-progress .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--color-text-light);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>PDF a JPG</h1>
            <p>Convierte cada pagina del PDF en una imagen JPG con compresion configurable</p>
        </header>

        <main class="content-grid">
            <!-- Seccion principal -->
            <section class="main-section">
                <!-- Zona de carga -->
                <div id="zona-carga" class="upload-zone">
                    <div class="upload-icon">
                        <svg width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                            <polyline points="17 8 12 3 7 8"/>
                            <line x1="12" y1="3" x2="12" y2="15"/>
                        </svg>
                    </div>
                    <p class="upload-text">Arrastra tu archivo PDF aqui</p>
                    <p class="upload-subtext">o haz clic para seleccionar</p>
                    <input type="file" id="file-input" accept=".pdf,application/pdf" hidden>
                </div>

                <!-- Progreso de carga -->
                <div id="progreso-carga" class="upload-progress" style="display: none;">
                    <div class="progress-bar-container">
                        <div id="barra-progreso" class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="progress-info">
                        <span id="texto-progreso">Subiendo archivo...</span>
                        <span id="porcentaje-progreso">0%</span>
                    </div>
                </div>

                <!-- Info del archivo cargado -->
                <div id="info-archivo" class="file-info" style="display: none;">
                    <div class="file-info-icon">PDF</div>
                    <div class="file-info-details">
                        <div id="nombre-archivo" class="file-info-name">documento.pdf</div>
                        <div class="file-info-meta">
                            <span id="num-paginas">0</span> paginas
                        </div>
                    </div>
                </div>

                <!-- Preview -->
                <section id="seccion-preview" class="preview-section" style="display: none;">
                    <h3 style="margin-bottom: 15px;">Vista Previa</h3>
                    <div id="preview-container" class="preview-container">
                        <p class="preview-placeholder">Cargando vista previa...</p>
                    </div>
                </section>

                <!-- Mensajes de estado -->
                <div id="mensaje-estado" class="status-message" style="display: none;"></div>
            </section>

            <!-- Panel de opciones -->
            <aside id="panel-opciones" class="options-panel" style="display: none;">
                <h3 style="margin-bottom: 20px;">Opciones de Conversion</h3>

                <!-- Selector de DPI -->
                <div class="option-section">
                    <h4>Resolucion (DPI)</h4>
                    <div class="dpi-selector">
                        <div class="dpi-option">
                            <input type="radio" name="dpi" id="dpi-72" value="72">
                            <label for="dpi-72">72<span>Baja</span></label>
                        </div>
                        <div class="dpi-option">
                            <input type="radio" name="dpi" id="dpi-150" value="150" checked>
                            <label for="dpi-150">150<span>Media</span></label>
                        </div>
                        <div class="dpi-option">
                            <input type="radio" name="dpi" id="dpi-300" value="300">
                            <label for="dpi-300">300<span>Alta</span></label>
                        </div>
                        <div class="dpi-option">
                            <input type="radio" name="dpi" id="dpi-600" value="600">
                            <label for="dpi-600">600<span>Muy Alta</span></label>
                        </div>
                    </div>
                </div>

                <!-- Calidad JPG -->
                <div class="option-section">
                    <h4>Calidad de Compresion JPG</h4>
                    <div class="quality-value"><span id="calidad-valor">85</span>%</div>
                    <div class="quality-slider-container">
                        <input type="range" id="calidad-slider" class="quality-slider"
                               min="60" max="95" value="85" step="5">
                        <div class="quality-labels">
                            <span>60% (menor tamaño)</span>
                            <span>95% (mejor calidad)</span>
                        </div>
                    </div>
                </div>

                <!-- Selector de paginas -->
                <div class="option-section">
                    <h4>Paginas</h4>
                    <div class="pages-selector">
                        <div class="page-option">
                            <input type="radio" name="paginas-tipo" id="paginas-todas" value="all" checked>
                            <label for="paginas-todas">Todas las paginas</label>
                        </div>

                        <div class="page-option">
                            <input type="radio" name="paginas-tipo" id="paginas-rango" value="range">
                            <label for="paginas-rango">Rango de paginas</label>
                        </div>
                        <div class="page-range-inputs" id="rango-inputs" style="display: none;">
                            <span>Desde</span>
                            <input type="number" id="pagina-desde" min="1" value="1">
                            <span>hasta</span>
                            <input type="number" id="pagina-hasta" min="1" value="1">
                        </div>

                        <div class="page-option">
                            <input type="radio" name="paginas-tipo" id="paginas-especificas" value="specific">
                            <label for="paginas-especificas">Paginas especificas</label>
                        </div>
                        <div class="page-specific-input" id="especificas-input" style="display: none;">
                            <input type="text" id="paginas-lista" placeholder="1, 3, 5-10, 15">
                            <small>Separa con comas. Usa guion para rangos.</small>
                        </div>
                    </div>
                </div>

                <!-- Estimacion de tamano -->
                <div class="size-estimate" id="size-estimate">
                    <div class="size-estimate-row">
                        <span class="size-estimate-label">Paginas a convertir:</span>
                        <span class="size-estimate-value" id="est-paginas">-</span>
                    </div>
                    <div class="size-estimate-row">
                        <span class="size-estimate-label">Tamano estimado (JPG):</span>
                        <span class="size-estimate-value" id="est-tamano-jpg">-</span>
                    </div>
                    <div class="size-estimate-row">
                        <span class="size-estimate-label">Comparado con PNG:</span>
                        <span class="size-estimate-value size-compare" id="est-ahorro">-</span>
                    </div>
                </div>

                <!-- Botones de accion -->
                <div class="action-buttons" style="margin-top: 25px;">
                    <button id="btn-ejecutar" class="btn btn-primary" disabled>
                        Convertir a JPG
                    </button>
                </div>

                <!-- Progreso de procesamiento -->
                <div id="progreso-proceso" class="process-progress" style="display: none;">
                    <div class="progress-bar-container">
                        <div id="barra-proceso" class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">
                        <span id="texto-proceso">Procesando...</span>
                        <span id="porcentaje-proceso">0%</span>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="footer">
            <p><strong>PDF-Export & Import</strong> - Herramientas de conversion PDF para la Soberanía Digital Empresarial</p>
            <p class="footer-info"><a href="/">Volver al inicio</a></p>

            <div class="footer-legal" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--color-border); font-size: 0.85rem; color: var(--color-text-light); text-align: left; max-width: 900px; margin-left: auto; margin-right: auto;">
                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--color-text);">Aviso de uso y alcance</h4>
                <p style="margin-bottom: 10px;">Esta aplicación y su API están destinadas a uso privado.
                No se implementan claves de acceso a nivel de aplicación con el objetivo de mantener transparencia total sobre su funcionamiento y fomentar la conciencia respecto del tratamiento de documentos y datos compartidos.</p>

                <p style="margin-bottom: 10px;">Se recomienda su despliegue dentro de una red local (LAN), preferentemente en una zona desmilitarizada (DMZ).
                En caso de habilitar acceso externo, se sugiere hacerlo mediante un proxy inverso con mecanismos de autenticación, quedando dicha configuración bajo el criterio y responsabilidad del usuario.</p>

                <p style="margin-bottom: 10px;">Este proyecto se presenta como un prototipo funcional, orientado a mejorar la eficiencia operativa y promover la soberanía digital sobre los recursos informáticos utilizados para el procesamiento de documentos.</p>

                <p>El código y la aplicación se distribuyen bajo una licencia de uso público y amplio, permitiendo su utilización, modificación y adaptación conforme a dicho marco.</p>
            </div>
        </footer>
    </div>

    <script src="/config.js"></script>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/pdf-to-jpg.js"></script>
</body>
</html>
