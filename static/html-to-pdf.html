<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML a PDF - PDF-Export & Import</title>
    <link rel="icon" type="image/x-icon" href="/static/fav.ico">
    <link rel="stylesheet" href="/static/css/styles.css">
    <style>
        /* Estilos especificos para HTML a PDF */
        .content-grid {
            display: grid;
            grid-template-columns: 1fr 320px;
            gap: 30px;
            align-items: start;
        }

        @media (max-width: 900px) {
            .content-grid {
                grid-template-columns: 1fr;
            }
        }

        .options-panel {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid var(--color-border);
        }

        .option-section {
            margin-bottom: 20px;
            padding-bottom: 20px;
            border-bottom: 1px solid var(--color-border);
        }

        .option-section:last-of-type {
            border-bottom: none;
            margin-bottom: 0;
            padding-bottom: 0;
        }

        .option-section h4 {
            margin-bottom: 12px;
            font-weight: 500;
        }

        /* Campo de URL */
        .url-input-section {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 25px;
            border: 1px solid var(--color-border);
            margin-bottom: 20px;
        }

        .url-input-section h3 {
            margin-bottom: 15px;
        }

        .url-input-wrapper {
            display: flex;
            gap: 10px;
        }

        .url-input-wrapper input {
            flex: 1;
            padding: 12px 15px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            font-size: 1rem;
            transition: all 0.2s;
        }

        .url-input-wrapper input:focus {
            outline: none;
            border-color: var(--color-primary);
        }

        .url-input-wrapper input::placeholder {
            color: var(--color-text-light);
        }

        .btn-preview {
            padding: 12px 20px;
            background: var(--color-background);
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            font-weight: 500;
            transition: all 0.2s;
            white-space: nowrap;
        }

        .btn-preview:hover:not(:disabled) {
            border-color: var(--color-primary);
            color: var(--color-primary);
        }

        .btn-preview:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* Vista previa */
        .preview-section {
            background: var(--color-surface);
            border-radius: 12px;
            padding: 20px;
            border: 1px solid var(--color-border);
        }

        .preview-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }

        .preview-header h3 {
            margin: 0;
        }

        .preview-container {
            background: var(--color-background);
            border-radius: 8px;
            min-height: 300px;
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .preview-container img {
            max-width: 100%;
            max-height: 500px;
            object-fit: contain;
        }

        .preview-placeholder {
            text-align: center;
            color: var(--color-text-light);
            padding: 40px;
        }

        .preview-placeholder svg {
            width: 64px;
            height: 64px;
            margin-bottom: 15px;
            opacity: 0.5;
        }

        .preview-loading {
            text-align: center;
            padding: 40px;
        }

        .preview-loading .spinner {
            width: 40px;
            height: 40px;
            border: 3px solid var(--color-border);
            border-top-color: var(--color-primary);
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Selector de tamano de pagina */
        .page-size-selector {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 8px;
        }

        .page-size-option input {
            display: none;
        }

        .page-size-option label {
            display: block;
            padding: 10px 8px;
            text-align: center;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.9rem;
        }

        .page-size-option input:checked + label {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
            color: var(--color-primary);
        }

        /* Selector de orientacion */
        .orientation-selector {
            display: flex;
            gap: 10px;
        }

        .orientation-option {
            flex: 1;
        }

        .orientation-option input {
            display: none;
        }

        .orientation-option label {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 15px;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .orientation-option label .icon {
            width: 30px;
            height: 40px;
            border: 2px solid currentColor;
            border-radius: 3px;
        }

        .orientation-option label .icon.horizontal {
            width: 40px;
            height: 30px;
        }

        .orientation-option input:checked + label {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
            color: var(--color-primary);
        }

        /* Selector de margenes */
        .margins-selector {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 8px;
        }

        .margins-option input {
            display: none;
        }

        .margins-option label {
            display: block;
            padding: 10px 8px;
            text-align: center;
            border: 2px solid var(--color-border);
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
            font-size: 0.85rem;
        }

        .margins-option input:checked + label {
            border-color: var(--color-primary);
            background: rgba(37, 99, 235, 0.1);
            color: var(--color-primary);
        }

        /* Checkboxes personalizados */
        .checkbox-option {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 10px;
        }

        .checkbox-option:last-child {
            margin-bottom: 0;
        }

        .checkbox-option input[type="checkbox"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }

        .checkbox-option label {
            cursor: pointer;
            font-size: 0.9rem;
        }

        /* Barra de progreso */
        .process-progress {
            margin-top: 20px;
        }

        .process-progress .progress-bar-container {
            height: 8px;
            background: var(--color-border);
            border-radius: 4px;
            overflow: hidden;
            margin-bottom: 10px;
        }

        .process-progress .progress-bar {
            height: 100%;
            background: var(--color-primary);
            border-radius: 4px;
            transition: width 0.3s;
        }

        .process-progress .progress-text {
            display: flex;
            justify-content: space-between;
            font-size: 0.85rem;
            color: var(--color-text-light);
        }

        /* Informacion de URL */
        .url-info {
            background: rgba(37, 99, 235, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.85rem;
        }

        .url-info .url-domain {
            font-weight: 600;
            color: var(--color-primary);
        }

        /* Advertencias */
        .warnings {
            background: rgba(245, 158, 11, 0.1);
            border-radius: 8px;
            padding: 12px;
            margin-top: 15px;
            font-size: 0.8rem;
            color: var(--color-text-light);
        }

        .warnings strong {
            color: var(--color-text);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>HTML a PDF</h1>
            <p>Convierte una pagina web a PDF capturando su contenido visual</p>
        </header>

        <main class="content-grid">
            <!-- Seccion principal -->
            <section class="main-section">
                <!-- Campo de URL -->
                <div class="url-input-section">
                    <h3>URL de la pagina web</h3>
                    <div class="url-input-wrapper">
                        <input type="url" id="url-input" placeholder="https://ejemplo.com/pagina" autocomplete="off">
                        <button id="btn-preview" class="btn-preview" disabled>Vista Previa</button>
                    </div>
                    <div id="url-info" class="url-info" style="display: none;">
                        <span class="url-domain" id="url-domain">ejemplo.com</span>
                    </div>
                </div>

                <!-- Vista previa -->
                <div id="preview-section" class="preview-section" style="display: none;">
                    <div class="preview-header">
                        <h3>Vista previa</h3>
                    </div>
                    <div class="preview-container" id="preview-container">
                        <div class="preview-placeholder" id="preview-placeholder">
                            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                <rect x="3" y="3" width="18" height="18" rx="2"/>
                                <path d="M3 9h18"/>
                                <circle cx="7.5" cy="6" r="0.5" fill="currentColor"/>
                                <circle cx="10.5" cy="6" r="0.5" fill="currentColor"/>
                            </svg>
                            <p>La vista previa aparecera aqui</p>
                        </div>
                        <div class="preview-loading" id="preview-loading" style="display: none;">
                            <div class="spinner"></div>
                            <p>Generando vista previa...</p>
                        </div>
                        <img id="preview-image" src="" alt="Vista previa" style="display: none;">
                    </div>
                </div>

                <!-- Mensajes de estado -->
                <div id="mensaje-estado" class="status-message" style="display: none;"></div>
            </section>

            <!-- Panel de opciones -->
            <aside id="panel-opciones" class="options-panel">
                <h3 style="margin-bottom: 20px;">Opciones de Conversion</h3>

                <!-- Tamano de pagina -->
                <div class="option-section">
                    <h4>Tamano de pagina</h4>
                    <div class="page-size-selector">
                        <div class="page-size-option">
                            <input type="radio" name="tamano" id="tamano-a4" value="A4" checked>
                            <label for="tamano-a4">A4</label>
                        </div>
                        <div class="page-size-option">
                            <input type="radio" name="tamano" id="tamano-letter" value="Letter">
                            <label for="tamano-letter">Letter</label>
                        </div>
                        <div class="page-size-option">
                            <input type="radio" name="tamano" id="tamano-legal" value="Legal">
                            <label for="tamano-legal">Legal</label>
                        </div>
                        <div class="page-size-option">
                            <input type="radio" name="tamano" id="tamano-a3" value="A3">
                            <label for="tamano-a3">A3</label>
                        </div>
                    </div>
                </div>

                <!-- Orientacion -->
                <div class="option-section">
                    <h4>Orientacion</h4>
                    <div class="orientation-selector">
                        <div class="orientation-option">
                            <input type="radio" name="orientacion" id="orientacion-vertical" value="vertical" checked>
                            <label for="orientacion-vertical">
                                <div class="icon"></div>
                                <span>Vertical</span>
                            </label>
                        </div>
                        <div class="orientation-option">
                            <input type="radio" name="orientacion" id="orientacion-horizontal" value="horizontal">
                            <label for="orientacion-horizontal">
                                <div class="icon horizontal"></div>
                                <span>Horizontal</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Margenes -->
                <div class="option-section">
                    <h4>Margenes</h4>
                    <div class="margins-selector">
                        <div class="margins-option">
                            <input type="radio" name="margenes" id="margenes-sin" value="sin_margenes">
                            <label for="margenes-sin">Sin</label>
                        </div>
                        <div class="margins-option">
                            <input type="radio" name="margenes" id="margenes-normales" value="normales" checked>
                            <label for="margenes-normales">Normales</label>
                        </div>
                        <div class="margins-option">
                            <input type="radio" name="margenes" id="margenes-amplios" value="amplios">
                            <label for="margenes-amplios">Amplios</label>
                        </div>
                    </div>
                </div>

                <!-- Opciones adicionales -->
                <div class="option-section">
                    <h4>Opciones adicionales</h4>
                    <div class="checkbox-option">
                        <input type="checkbox" id="incluir-fondo" checked>
                        <label for="incluir-fondo">Incluir fondo/colores</label>
                    </div>
                    <div class="checkbox-option">
                        <input type="checkbox" id="solo-contenido">
                        <label for="solo-contenido">Solo contenido principal</label>
                    </div>
                </div>

                <!-- Advertencias -->
                <div class="warnings">
                    <strong>Nota:</strong> Algunas paginas con JavaScript pesado pueden no renderizar correctamente. Paginas que requieren login no funcionaran.
                </div>

                <!-- Botones de accion -->
                <div class="action-buttons" style="margin-top: 20px;">
                    <button id="btn-convertir" class="btn btn-primary" disabled>
                        Convertir a PDF
                    </button>
                </div>

                <!-- Progreso de procesamiento -->
                <div id="progreso-proceso" class="process-progress" style="display: none;">
                    <div class="progress-bar-container">
                        <div id="barra-proceso" class="progress-bar" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">
                        <span id="texto-proceso">Procesando...</span>
                        <span id="porcentaje-proceso">0%</span>
                    </div>
                </div>
            </aside>
        </main>

        <footer class="footer">
            <p><strong>PDF-Export & Import</strong> - Herramientas de conversion PDF para la Soberanía Digital Empresarial</p>
            <p class="footer-info"><a href="/">Volver al inicio</a></p>

            <div class="footer-legal" style="margin-top: 20px; padding-top: 20px; border-top: 1px solid var(--color-border); font-size: 0.85rem; color: var(--color-text-light); text-align: left; max-width: 900px; margin-left: auto; margin-right: auto;">
                <h4 style="font-size: 0.95rem; margin-bottom: 10px; color: var(--color-text);">Aviso de uso y alcance</h4>
                <p style="margin-bottom: 10px;">Esta aplicación y su API están destinadas a uso privado.
                No se implementan claves de acceso a nivel de aplicación con el objetivo de mantener transparencia total sobre su funcionamiento y fomentar la conciencia respecto del tratamiento de documentos y datos compartidos.</p>

                <p style="margin-bottom: 10px;">Se recomienda su despliegue dentro de una red local (LAN), preferentemente en una zona desmilitarizada (DMZ).
                En caso de habilitar acceso externo, se sugiere hacerlo mediante un proxy inverso con mecanismos de autenticación, quedando dicha configuración bajo el criterio y responsabilidad del usuario.</p>

                <p style="margin-bottom: 10px;">Este proyecto se presenta como un prototipo funcional, orientado a mejorar la eficiencia operativa y promover la soberanía digital sobre los recursos informáticos utilizados para el procesamiento de documentos.</p>

                <p>El código y la aplicación se distribuyen bajo una licencia de uso público y amplio, permitiendo su utilización, modificación y adaptación conforme a dicho marco.</p>
            </div>
        </footer>
    </div>

    <script src="/config.js"></script>
    <script src="/static/js/common.js"></script>
    <script src="/static/js/html-to-pdf.js"></script>
</body>
</html>
